<!-- Tabla de variantes del producto -->
<div class="variants-card">
  <div class="variants-header">
    <h2 class="text-xl font-bold flex items-center">
      <svg
        class="w-6 h-6 mr-3"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
        ></path>
      </svg>
      Variantes del Producto
    </h2>
  </div>

  <div class="p-6">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Tabla de variantes editable (2/3 del espacio) -->
      <div class="lg:col-span-2">
        <!-- Botón para agregar variante -->
        <div class="mb-4 flex justify-between items-center">
          <h3 class="text-lg font-semibold text-gray-700">
            Lista de Variantes
          </h3>
          <button
            type="button"
            (click)="agregarVariante()"
            class="bg-secondary hover:bg-secondary-dark text-white font-semibold px-4 py-2 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 flex items-center text-sm"
          >
            <svg
              class="w-4 h-4 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 6v6m0 0v6m0-6h6m-6 0H6"
              ></path>
            </svg>
            Agregar Fila
          </button>
        </div>

        <!-- Tabla editable -->
        <div class="overflow-x-auto rounded-lg border border-gray-200">
          <table class="variants-table">
            <thead>
              <tr>
                <th class="variants-th">Color</th>
                <th class="variants-th">Talla</th>
                <th class="variants-th">Stock</th>
                <th class="variants-th">Acciones</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr
                *ngFor="let variante of variantes(); let i = index"
                class="variants-row"
              >
                <!-- Color -->
                <td class="variants-td">
                  <input
                    type="text"
                    [(ngModel)]="variante.color"
                    class="editable-input"
                    placeholder="Color"
                    required
                  />
                </td>

                <!-- Talla -->
                <td class="variants-td">
                  <select
                    [(ngModel)]="variante.talla"
                    class="editable-select"
                    required
                  >
                    <option value="">Seleccionar</option>
                    <option value="XS">XS</option>
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                    <option value="XXL">XXL</option>
                    <option value="Único">Único</option>
                  </select>
                </td>

                <!-- Stock -->
                <td class="variants-td">
                  <input
                    type="number"
                    [(ngModel)]="variante.stock"
                    class="editable-input"
                    placeholder="0"
                    min="0"
                    required
                  />
                </td>

                <!-- Acciones -->
                <td class="variants-td">
                  <button
                    type="button"
                    (click)="eliminarVariante(i)"
                    class="text-red-500 hover:text-red-700 transition-colors"
                    title="Eliminar variante"
                  >
                    <svg
                      class="w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      ></path>
                    </svg>
                  </button>
                </td>
              </tr>

              <!-- Fila vacía cuando no hay variantes -->
              <tr *ngIf="variantes().length === 0">
                <td
                  colspan="4"
                  class="variants-td text-center text-gray-500 py-8"
                >
                  No hay variantes agregadas. Haz clic en "Agregar Fila" para
                  comenzar.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Área de carga de imágenes (1/3 del espacio) -->
      <div class="lg:col-span-1">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">
          Imágenes del Producto
        </h3>
        <div class="image-upload-container">
          <!-- Imagen 1 -->
          <div class="relative">
            <div
              class="image-upload-box"
              [class.has-image]="imagenes()[0]"
              (dragover)="onDragOver($event, 0)"
              (dragleave)="onDragLeave($event, 0)"
              (drop)="onFileDrop($event, 0)"
              (click)="triggerFileInput(0)"
            >
              <img
                *ngIf="imagenes()[0]; else uploadTemplate1"
                [src]="imagenes()[0]"
                alt="Imagen 1"
                class="image-preview"
              />

              <ng-template #uploadTemplate1>
                <svg
                  class="w-8 h-8 mx-auto text-gray-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
                <p class="image-upload-text">Arrastra imagen aquí o haz clic</p>
                <p class="text-xs text-gray-400">Imagen principal</p>
              </ng-template>
            </div>

            <button
              *ngIf="imagenes()[0]"
              type="button"
              (click)="removeImage(0)"
              class="remove-image-btn"
            >
              ×
            </button>

            <input
              #fileInput0
              type="file"
              accept="image/*"
              (change)="onFileSelected($event, 0)"
              class="hidden"
            />
          </div>

          <!-- Imagen 2 -->
          <div class="relative">
            <div
              class="image-upload-box"
              [class.has-image]="imagenes()[1]"
              (dragover)="onDragOver($event, 1)"
              (dragleave)="onDragLeave($event, 1)"
              (drop)="onFileDrop($event, 1)"
              (click)="triggerFileInput(1)"
            >
              <img
                *ngIf="imagenes()[1]; else uploadTemplate2"
                [src]="imagenes()[1]"
                alt="Imagen 2"
                class="image-preview"
              />

              <ng-template #uploadTemplate2>
                <svg
                  class="w-8 h-8 mx-auto text-gray-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
                <p class="image-upload-text">Arrastra imagen aquí o haz clic</p>
                <p class="text-xs text-gray-400">Imagen secundaria</p>
              </ng-template>
            </div>

            <button
              *ngIf="imagenes()[1]"
              type="button"
              (click)="removeImage(1)"
              class="remove-image-btn"
            >
              ×
            </button>

            <input
              #fileInput1
              type="file"
              accept="image/*"
              (change)="onFileSelected($event, 1)"
              class="hidden"
            />
          </div>

          <!-- Imagen 3 -->
          <div class="relative">
            <div
              class="image-upload-box"
              [class.has-image]="imagenes()[2]"
              (dragover)="onDragOver($event, 2)"
              (dragleave)="onDragLeave($event, 2)"
              (drop)="onFileDrop($event, 2)"
              (click)="triggerFileInput(2)"
            >
              <img
                *ngIf="imagenes()[2]; else uploadTemplate3"
                [src]="imagenes()[2]"
                alt="Imagen 3"
                class="image-preview"
              />

              <ng-template #uploadTemplate3>
                <svg
                  class="w-8 h-8 mx-auto text-gray-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
                <p class="image-upload-text">Arrastra imagen aquí o haz clic</p>
                <p class="text-xs text-gray-400">Imagen adicional</p>
              </ng-template>
            </div>

            <button
              *ngIf="imagenes()[2]"
              type="button"
              (click)="removeImage(2)"
              class="remove-image-btn"
            >
              ×
            </button>

            <input
              #fileInput2
              type="file"
              accept="image/*"
              (change)="onFileSelected($event, 2)"
              class="hidden"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
